<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Effective Java</title>
  <meta name="description" content="Effective java is a great book to hone your technical skills and a best investment you can make if you are a Java developer. This is just my notes , will be ...">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/java/2017/06/04/Effectivejava.html">
  <link rel="alternate" type="application/rss+xml" title="Programming Passion" href="/feed.xml">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">

    <a class="site-title" href="/">Programming Passion</a>

    <nav class="site-nav">
      <span class="menu-icon">
        <svg viewBox="0 0 18 15" width="18px" height="15px">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </span>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Effective Java</h1>
    <p class="post-meta"><time datetime="2017-06-04T22:06:23-05:00" itemprop="datePublished">Jun 4, 2017</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Effective java is a great book to hone your technical skills and a best investment you can make if you are a Java developer.</p>

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ac&amp;ref=qf_sp_asin_til&amp;ad_type=product_link&amp;tracking_id=awesomeyogi-20&amp;marketplace=amazon&amp;region=US&amp;placement=0321356683&amp;asins=0321356683&amp;linkId=4bdd1e1a7678cada93ef0f5b806ad320&amp;show_border=false&amp;link_opens_in_new_window=false&amp;price_color=333333&amp;title_color=0066C0&amp;bg_color=FFFFFF">
    </iframe>

<p>This is just my notes , will be adding more notes as i go through the book.</p>

<ul>
  <li>The language supports four kinds of types: interfaces (including annotations), classes (including enums), arrays, and primitives. The first three are known
as reference types. Class instances and arrays are objects; primitive values are not.</li>
  <li>A class’s members consist of its fields, methods, member classes, and member interfaces. A method’s signature consists of its name and the types of its formal
parameters; the signature does not include the method’s return type</li>
</ul>

<h2 id="creating-and-destroying-objects">Creating and Destroying Objects</h2>

<h1 id="item-1-consider-static-factories-instead-of-constructors">Item 1: Consider static factories instead of constructors</h1>

<ul>
  <li>More meaningful name than constructor  BigInteger.probablePrime</li>
  <li>Compact API like Collections , 32 classes</li>
  <li>Unlike constructor can return a subType.
  EnumSet example mutliple implementations and client need not know which is returned.</li>
  <li>The returned object might not even be there when writing code, such loose coupling is seen serve provider API’s
 service provider api , the object returned may not be even there</li>
</ul>

<p>Service API ,Provider API  ,Provider registration api ,Service Access API
  Analogy to jdbc Connection =&gt; Service api         DriverManager.register  DriverManger.getConnection</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Service provider framework sketch</span>
<span class="c1">// Service interface</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Service</span> <span class="o">{</span>
<span class="o">...</span> <span class="c1">// Service-specific methods go here</span>
<span class="o">}</span>
<span class="c1">// Service provider interface</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Provider</span> <span class="o">{</span>
  <span class="n">Service</span> <span class="nf">newService</span><span class="o">();</span>
<span class="o">}</span>
<span class="c1">// Noninstantiable class for service registration and access</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Services</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nf">Services</span><span class="o">()</span> <span class="o">{</span> <span class="o">}</span> <span class="c1">// Prevents instantiation (Item 4)</span>
  <span class="c1">// Maps service names to services</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Provider</span><span class="o">&gt;</span> <span class="n">providers</span> <span class="o">=</span>  <span class="k">new</span> <span class="n">ConcurrentHashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Provider</span><span class="o">&gt;();</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">DEFAULT_PROVIDER_NAME</span> <span class="o">=</span> <span class="s">"&lt;def&gt;"</span><span class="o">;</span>

  <span class="c1">// Provider registration API</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">registerDefaultProvider</span><span class="o">(</span><span class="n">Provider</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">registerProvider</span><span class="o">(</span><span class="n">DEFAULT_PROVIDER_NAME</span><span class="o">,</span> <span class="n">p</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">registerProvider</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Provider</span> <span class="n">p</span><span class="o">){</span>
    <span class="n">providers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">p</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="c1">// Service access API</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Service</span> <span class="nf">newInstance</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">newInstance</span><span class="o">(</span><span class="n">DEFAULT_PROVIDER_NAME</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Service</span> <span class="nf">newInstance</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Provider</span> <span class="n">p</span> <span class="o">=</span> <span class="n">providers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">p</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span>
      <span class="s">"No provider registered with name: "</span> <span class="o">+</span> <span class="n">name</span><span class="o">);</span>
      <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="na">newService</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<ul>
  <li>An instance-controlled class is one that uses static factories to strictly control what instances exist at any time.</li>
</ul>

<h1 id="item-2-consider-a-builder-when-faced-with-many-constructor-parameters">Item 2: Consider a builder when faced with many constructor parameters</h1>

<ul>
  <li>Avoids telescopic conttructor pattern</li>
</ul>

<h1 id="item-3-enforce-singleton-pattern-with-a-private-constructor-or-an-enum-type">Item 3:	Enforce Singleton pattern with a private constructor or an enum type</h1>

<ul>
  <li>private constructor and static factory method to create a Singleton</li>
  <li>Adding implements serializable to singleton is not enough, you must declare all fields transient and provide a readResolve method.</li>
  <li>A single-element enum type provides serialization for free</li>
</ul>

<h1 id="item-4-enforce-noninstantiability-with-a-private-constructor">Item 4: Enforce Noninstantiability with a private constructor</h1>

<ul>
  <li>No reason to have utility classes instantiable</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UtilityClass</span> <span class="o">{</span>
  <span class="c1">// suppress default constructor for non instantiability</span>
	<span class="kd">private</span> <span class="nf">UtilityClass</span><span class="o">(){</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">AssertionError</span><span class="o">();</span>  <span class="c1">//prevents someone in class accidentally initializing the constructor</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h1 id="item-5-avoid-creating-unnecessary-objects">Item 5: Avoid creating unnecessary Objects</h1>

<ul>
  <li>you can often avoid creating unnecessary objects by using static factory methods in preference to constructor on immutable classes that provide both.</li>
  <li>“hello” is better than new String(“hello”)</li>
  <li>Boolean.valueOf(“true”) is better than new Boolean(“true”)</li>
  <li>Immutable objects could be reused for free</li>
  <li>Mutable objects could be reused if you really sure, they won’t be modified</li>
  <li>
    <p>KeySet method of the Map interface returns a Set view of the Map Object, consisting of all the keys in the map. Every call to keyset on a given map returns same Set instance. Although retuned</p>
  </li>
  <li>prefer primitivates to boxed primitives and watch out for unintenstional autoboxing.</li>
</ul>

<h1 id="item--6-eliminate-obsolete-object-references">Item  6: Eliminate obsolete object references</h1>

<ul>
  <li>Nullify obsolete references</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Stack</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">elements</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">DEFAULT_INITIAL_CAPACITY</span> <span class="o">=</span> <span class="mi">16</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Stack</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">elements</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="n">DEFAULT_INITIAL_CAPACITY</span><span class="o">];</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">push</span><span class="o">(</span><span class="n">Object</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ensureCapacity</span><span class="o">();</span>
    <span class="n">elements</span><span class="o">[</span><span class="n">size</span><span class="o">++]</span> <span class="o">=</span> <span class="n">e</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">Object</span> <span class="nf">pop</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">EmptyStackException</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">elements</span><span class="o">[--</span><span class="n">size</span><span class="o">];</span>
  <span class="o">}</span>
  <span class="c1">// Ensure space for at least one more element, roughly doubling the capacity each time the array needs to grow</span>
  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">ensureCapacity</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">elements</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="n">size</span><span class="o">)</span>
    <span class="n">elements</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">copyOf</span><span class="o">(</span><span class="n">elements</span><span class="o">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">size</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<ul>
  <li>
    <p>If a stack grows and then shrinks, the objects that were popped off the stack will not be garbage collected, even if the program using the stack has no more references to them. This is because the stack maintains obsolete references to these objects.</p>
  </li>
  <li>
    <p>Whenever a class manages its own memory, the programmer should be alert for memory leaks.</p>
  </li>
  <li>
    <p>Deregister outdated listeners and callbacks</p>
  </li>
</ul>

<h1 id="item-7--avoid-finalizers">Item 7  Avoid Finalizers</h1>

<ul>
  <li>Finalizers are unpredictable, often dangerous and generally unnecessary.</li>
  <li>It can take arbitararily long between the time than an object becomes unreachable and the time that its finalizer is executed.So never do time-criticial things
ex :- depend on finalizer to close file.</li>
  <li>Use terminate methods like close on streams instead of finalizers</li>
  <li>Might work on your cpu java implementations but can behave differently in different jdk or OS</li>
  <li>chaining with super class is not default behavior ,you need to call super class finalizer method explicitly if a sub class overrides the class.</li>
  <li>Better to write an anonoymous inner class with finalizer  Finalizer guard class</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Finalizer Guardian idiom</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="c1">// Sole purpose of this object is to finalize outer Foo object</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Object</span> <span class="n">finalizerGuardian</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span> <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">finalize</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Throwable</span> <span class="o">{</span>
      <span class="c1">// Finalize outer Foo object</span>
    <span class="o">}</span>
  <span class="o">};</span>
 <span class="c1">// Remainder omitted</span>
<span class="o">}</span></code></pre></figure>

<ul>
  <li>Finalizers act as safety net in cas the owner of an object forgets to call its explicit termination method.</li>
  <li>A second legitimate use of finalizers concerns objects with native peers. A native peer is a native object to which a normal object delegates via native methods.
Because a native peer is not a normal object, the garbage collector doesn’t know about it and can’t reclaim it when its Java peer is reclaimed.</li>
</ul>

<h1 id="methods-common-to-all-objects">Methods Common to All objects</h1>

<h1 id="item-8--obey-the-general-contract-when-overriding-equals">Item 8  Obey the general contract when overriding equals</h1>

<ul>
  <li>No need to override the equals method
    <ul>
      <li>Each instance of the class is inherently unique</li>
      <li>You don’t care whether the class provides a logical equality test ..Example Random class</li>
      <li>A super class has already overriden the equals method and the super class behavior is appropriate.</li>
      <li>The class is private or package private and you are certain that its equal method will never be invoked</li>
    </ul>
  </li>
  <li>The equals method implements an equivalence relation
    <ul>
      <li>Reflexive</li>
      <li>Symmetric</li>
      <li>Transitive</li>
      <li>Conistent</li>
      <li>For any non-null reference  x.equals(null)  must return false</li>
    </ul>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// Broken - violates symmetry!</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">CaseInsensitiveString</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">s</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">CaseInsensitiveString</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">s</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">NullPointerException</span><span class="o">();</span>
      <span class="k">this</span><span class="o">.</span><span class="na">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="c1">// Broken - violates symmetry!</span>
    <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="n">CaseInsensitiveString</span><span class="o">)</span>
      <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span>
        <span class="o">((</span><span class="n">CaseInsensitiveString</span><span class="o">)</span> <span class="n">o</span><span class="o">).</span><span class="na">s</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="n">String</span><span class="o">)</span> <span class="c1">// One-way interoperability!</span>
        <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">((</span><span class="n">String</span><span class="o">)</span> <span class="n">o</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
      <span class="o">}</span>
  <span class="o">}</span>
  </code></pre></figure>

<ul>
  <li>Once you’ve violated the equals contract, you simply don’t know how other objects will behave when confronted with your object.</li>
</ul>

<h1 id="item-9-always-override-hashcode-when-you-override-equals">Item 9 Always override hashCode when you override equals</h1>

<ul>
  <li>equal objects needs to have equal hashcode</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">PhoneNumber</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">short</span> <span class="n">areaCode</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">short</span> <span class="n">prefix</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">short</span> <span class="n">lineNumber</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">PhoneNumber</span><span class="o">(</span><span class="kt">int</span> <span class="n">areaCode</span><span class="o">,</span> <span class="kt">int</span> <span class="n">prefix</span><span class="o">,</span><span class="kt">int</span> <span class="n">lineNumber</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">areaCode</span> <span class="o">=</span> <span class="o">(</span><span class="kt">short</span><span class="o">)</span> <span class="n">areaCode</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">prefix</span> <span class="o">=</span> <span class="o">(</span><span class="kt">short</span><span class="o">)</span> <span class="n">prefix</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">lineNumber</span> <span class="o">=</span> <span class="o">(</span><span class="kt">short</span><span class="o">)</span> <span class="n">lineNumber</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="k">this</span><span class="o">)</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(!(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="n">PhoneNumber</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">PhoneNumber</span> <span class="n">pn</span> <span class="o">=</span> <span class="o">(</span><span class="n">PhoneNumber</span><span class="o">)</span><span class="n">o</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">pn</span><span class="o">.</span><span class="na">lineNumber</span> <span class="o">==</span> <span class="n">lineNumber</span>    <span class="o">&amp;&amp;</span> <span class="n">pn</span><span class="o">.</span><span class="na">prefix</span> <span class="o">==</span> <span class="n">prefix</span>    <span class="o">&amp;&amp;</span> <span class="n">pn</span><span class="o">.</span><span class="na">areaCode</span> <span class="o">==</span> <span class="n">areaCode</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="c1">//Broken no hashcode method</span>
<span class="o">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Map</span><span class="o">&lt;</span><span class="n">PhoneNumber</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">PhoneNumber</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
<span class="n">m</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="k">new</span> <span class="n">PhoneNumber</span><span class="o">(</span><span class="mi">707</span><span class="o">,</span> <span class="mi">867</span><span class="o">,</span> <span class="mi">5309</span><span class="o">),</span> <span class="s">"Jenny"</span><span class="o">);</span>
<span class="n">m</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="k">new</span> <span class="n">PhoneNumber</span><span class="o">(</span><span class="mi">707</span><span class="o">,</span> <span class="mi">867</span><span class="o">,</span> <span class="mi">5309</span><span class="o">))</span>  <span class="c1">//you expect Jenney but you get null</span></code></pre></figure>

<ul>
  <li>equal objects should end up in same hash bucket. even if they endup in same hashbucket ,hasmaps are</li>
  <li>If a class is immutable and the cost of computing the hash code is significant,you might consider caching the hash code in the object rather than recalculating it
each time it is requested</li>
</ul>

<h1 id="item-10-always-override-tostring">Item 10 Always override toString</h1>

<ul>
  <li>When practical, the toString method should return all of the interesting information contained in the object</li>
  <li>The toString method is automatically invoked when an object is passed to println, printf, string concationation or assert or printed by debugger.
Programmers will generate diagnostic messages</li>
  <li>Provide programmatic access to all of the information contained in the value returned by toString.
By failing to provide accessors, you turn the string format into a de facto API, even if you’ve specified that it’s subject to change.</li>
</ul>

<h1 id="item-11-clone">Item 11 Clone</h1>
<ul>
  <li>Mixin interface</li>
  <li>Objects clone method is protected</li>
  <li>deepCopy</li>
</ul>

<h1 id="item-12-consider-implementing-comparable">Item 12 Consider Implementing Comparable</h1>

<ul>
  <li>Just like equals contract equivalence relationship</li>
  <li>if compareTo returns zero ,better be the objects equals if not specify with a comment</li>
  <li>new BigDecimal(“0.0”) ,new BigDecimal(“0.00”) added to HashSet will maintain two objets as it invokes equals contract vs treeSet which maintains one as it invokes compareTo</li>
  <li>Doesn’t tell magnitude -1 or -2 its upto programmer. The contract tells only negative and postive or zero</li>
</ul>

<h2 id="classes-and-interfaces">Classes and interfaces</h2>

<h1 id="item-13-minimize-the-accessibility-of-classes-and-members">Item 13 Minimize the accessibility of classes and members</h1>

<ul>
  <li>A well desinged module hides all of its implentation details, cleanly seperating its API from its implementation.</li>
  <li>Rule of thumb is simple : make each class or member as inaccessible as possible.</li>
  <li>For top-level (non-nested) classes and interfaces there are only two possible access levels : package-private and public
    <ul>
      <li>If a package-private top-level class is used by only one class,consider making the top-level class a private nested class of the sole class that uses it.</li>
    </ul>
  </li>
  <li>
    <p>For memebers (fields,methods,nested classes and nested interfaces) there are four possible assess levels private, package-private, protected( subclass + package)    ,public</p>
  </li>
  <li>private and package-private members are part of class’s implementation and do not notmally impact in exported API. These fields however can leak into the exported API if the class implements serializable</li>
  <li>Instance fields should never be public, if an instance field is non final or final reference to a mutable object, then by making the filed public, you give up the ability to limit the values that can be stored in the field. This means you give up the ability to enforce invariants involving this field.ALso you give up the ability to take action when the filed is modified, so classes with public mutable fields are non thread safe.</li>
  <li>A final field containing a reference to a mutable object has all the disadvantages of a nonfinal field. While the reference cannot be
modified, the referenced object can be modified—with disastrous results.</li>
  <li>Note that a nonzero-length array is always mutable,so it is wrong for a class to have a public static final array field, or an accessor that returns such a
field</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Potential security hole!</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Thing</span><span class="o">[]</span> <span class="n">VALUES</span> <span class="o">=</span> <span class="o">{</span> <span class="o">...</span> <span class="o">};</span></code></pre></figure>

<p>Two ways to fix</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Thing</span><span class="o">[]</span> <span class="n">PRIVATE_VALUES</span> <span class="o">=</span> <span class="o">{</span> <span class="o">...</span> <span class="o">};</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Thing</span><span class="o">&gt;</span> <span class="n">VALUES</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">unmodifiableList</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">PRIVATE_VALUES</span><span class="o">));</span></code></pre></figure>

<p>Alternative</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Thing</span><span class="o">[]</span> <span class="n">PRIVATE_VALUES</span> <span class="o">=</span> <span class="o">{</span> <span class="o">...</span> <span class="o">};</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Thing</span><span class="o">[]</span> <span class="nf">values</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">PRIVATE_VALUES</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<h1 id="item-14-in-public-classes--use-accessor-methodsnot-public-fields">Item 14 In public classes , use accessor methods,not public fields</h1>

<ul>
  <li>If a class is package-private or is a private nested class, there is nothing inherently wrong with exposing its data fields.</li>
  <li>Point and Dimension of java api classes are exceptions where there expose public fields and it was a bad idea.</li>
  <li>While its never a good idea for a public class to expose field directly, it is less harmful if the fields are immutable. You can’t change the repersentation of such
class without changing its API , and you can’t take auxilary actions when a field is read , but you can enforce invariants.</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// Public class with exposed immutable fields - questionable</span>
<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Time</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">HOURS_PER_DAY</span> <span class="o">=</span> <span class="mi">24</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">MINUTES_PER_HOUR</span> <span class="o">=</span> <span class="mi">60</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">hour</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">minute</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Time</span><span class="o">(</span><span class="kt">int</span> <span class="n">hour</span><span class="o">,</span> <span class="kt">int</span> <span class="n">minute</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">hour</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">hour</span> <span class="o">&gt;=</span> <span class="n">HOURS_PER_DAY</span><span class="o">)</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Hour: "</span> <span class="o">+</span> <span class="n">hour</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">minute</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">minute</span> <span class="o">&gt;=</span> <span class="n">MINUTES_PER_HOUR</span><span class="o">)</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Min: "</span> <span class="o">+</span> <span class="n">minute</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">hour</span> <span class="o">=</span> <span class="n">hour</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">minute</span> <span class="o">=</span> <span class="n">minute</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h1 id="item-15-minimize-immutability">Item 15 Minimize immutability</h1>
<ul>
  <li>An immputable class is simply a class whose instance cannot be modified. All of the information contained in each instance is provided when it is created an is fixed
for the lifetime of the object.</li>
  <li>Recipe for immutability
    <ul>
      <li>Don’t provide any mehtods that modify the Object’s state ( known as mutators)</li>
      <li>Ensure that class can’t be extended  : Subclasses can compromise the immutable behavior of the class by behaving as if the objects state has changed. //TODO need to research more on how</li>
      <li>Make all fields final</li>
      <li>Make all fields private, technically possible to have public final fields containing primitive value or immutable classes but a bad idea</li>
      <li>Ensure exclusive access to any mutable components , if your class has any fields that refer to mutable objects ensure that clients of the class cannot obtain references to these objects.  Never initialize such a field to a client-provided object reference or return the object refrenece from the accessors. Make defensive
copies in constructors, accessors and readObject methods</li>
    </ul>
  </li>
</ul>

<h1 id="item-16-favor-composition-over-inheritance">Item 16 Favor composition over inheritance</h1>

<ul>
  <li>A subclass depends on the implementation details of its superclassfor its proper function. The superclass’s implementation may change from release
to release, and if it does, the subclass may break, even though its code has not been touched.</li>
</ul>

<h1 id="item-19-use-interfaces-only-to-define-types">Item 19 Use interfaces only to define types</h1>
<ul>
  <li>The constant inerface pattern is a poor use of interfaces. That class uses some constants internally is an implementation detail. Implementing a constant
interface causes the implementation detail to leak into the class’s exported API.</li>
  <li>Interfaces should be used only to define types. They should not be used to export constants.</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Constant interface antipattern - do not use!</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">PhysicalConstants</span> <span class="o">{</span>
  <span class="o">/</span> <span class="o">/</span> <span class="n">Avogadro</span><span class="err">'</span><span class="n">s</span> <span class="nf">number</span> <span class="o">(</span><span class="mi">1</span><span class="o">/</span><span class="n">mol</span><span class="o">)</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">AVOGADROS_NUMBER</span> <span class="o">=</span> <span class="mf">6.02214199e23</span><span class="o">;</span>
    <span class="c1">// Boltzmann constant (J/K)</span>
    <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">BOLTZMANN_CONSTANT</span> <span class="o">=</span> <span class="mf">1.3806503</span><span class="n">e</span><span class="o">-</span><span class="mi">23</span><span class="o">;</span>
    <span class="c1">// Mass of the electron (kg)</span>
    <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">ELECTRON_MASS</span> <span class="o">=</span> <span class="mf">9.10938188</span><span class="n">e</span><span class="o">-</span><span class="mi">31</span><span class="o">;</span>
<span class="o">}</span>


<span class="c1">// Constant utility class</span>
<span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">effectivejava</span><span class="o">.</span><span class="na">science</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">PhysicalConstants</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nf">PhysicalConstants</span><span class="o">()</span> <span class="o">{</span> <span class="o">}</span> <span class="c1">// Prevents instantiation</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">AVOGADROS_NUMBER</span> <span class="o">=</span> <span class="mf">6.02214199e23</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">BOLTZMANN_CONSTANT</span> <span class="o">=</span> <span class="mf">1.3806503</span><span class="n">e</span><span class="o">-</span><span class="mi">23</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">ELECTRON_MASS</span> <span class="o">=</span> <span class="mf">9.10938188</span><span class="n">e</span><span class="o">-</span><span class="mi">31</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<h1 id="item-21-use-function-objects-to-represent-strategies">Item 21 Use function objects to represent strategies</h1>

<ul>
  <li>Some languages support function pointers, delegates, lambda expressions, or similar facilities that allow programs to store and transmit the ability to invoke a particular function.</li>
  <li>
    <p>Such facilities are typically used to allow the caller of a function to specialize its behavior by passing in a second function</p>
  </li>
  <li>A primary use of function pointers is to implement the Strategy pattern.
To implement this pattern in Java, declare an interface to represent the strategy, and a class that implements this interface for each concrete strategy.</li>
  <li>When a concrete strategy is used only once, it is typically declared and instantiated as an anonymous class.</li>
  <li>When a concrete strategy is designed for repeated use, it is generally implemented as a private static member class and exported in a public static final field whose type is the strategy interface.</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Exporting a concrete strategy</span>
<span class="kd">class</span> <span class="nc">Host</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">StrLenCmp</span> <span class="kd">implements</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;,</span> <span class="n">Serializable</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">String</span> <span class="n">s1</span><span class="o">,</span> <span class="n">String</span> <span class="n">s2</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">s1</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="n">s2</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
      <span class="o">}</span>
    <span class="o">}</span>
<span class="c1">// Returned comparator is serializable</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">STRING_LENGTH_COMPARATOR</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StrLenCmp</span><span class="o">();</span>
<span class="o">...</span> <span class="c1">// Bulk of class omitted</span>
<span class="o">}</span></code></pre></figure>

<h1 id="item-22-favor-static-member-class-over-non-static">Item 22 Favor static member class over non static</h1>

<ul>
  <li>A nested class is a class within another class.</li>
  <li>4 kind of nested classes. static member class, non static member class, anonymous class and local class</li>
  <li>inner class =&gt; non static member class , anonymous class, local class</li>
  <li>A static member class is the simplest kind of nested class. It is best thought of as an ordinary class that happens to be declared inside another class and has
access to all of the enclosing class’s members, even those declared private.</li>
  <li>The association between a nonstatic member class instance and its enclosing instance is established when the former is created; it cannot be modified
thereafter. Normally, the association is established automatically by invoking a nonstatic member class constructor from within an instance method of the
enclosing class.</li>
  <li>If an instance of a nested class can exist in isolation from an instance of its enclosingclass, then the nested class must be a static member class</li>
  <li>it is impossible to create an instance of a nonstatic member class without an enclosing instance.</li>
  <li>A common use of private static member classes is to represent components of the object represented by their enclosing class. For example, consider a Map
instance, which associates keys with values. Many Map implementations have an internal Entry object for each key-value pair in the map. While each entry is associated
with a map, the methods on an entry (getKey, getValue, and setValue) do not need access to the map. Therefore, it would be wasteful to use a nonstatic
member class to represent entries: a private static member class is best. If you accidentally omit the static modifier in the entry declaration, the map will still
work, but each entry will contain a superfluous reference to the map, which wastes space and time.</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Typical use of a nonstatic member class</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MySet</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">AbstractSet</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="o">...</span> <span class="c1">// Bulk of the class omitted</span>
  <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">MyIterator</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">class</span> <span class="nc">MyIterator</span> <span class="kd">implements</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h1 id="item-23-dont-use-raw-types-in-new-code">Item 23 Don’t use raw types in new code</h1>

<ul>
  <li>A class or interface whose declaration has one or more type parameters is a generic class or interface. The List interface has a single type parameter, E, representing the element type of the list.</li>
  <li>If you use raw types, you lose all the safety and expressiveness benefits of generics</li>
  <li>you lose type safety if you use a raw type like List, but not if you use a parameterized type like List<object></object></li>
</ul>

<table>
  <tbody>
    <tr>
      <td>Term</td>
      <td>Example</td>
      <td>Item</td>
    </tr>
    <tr>
      <td>parameterized type</td>
      <td>List<String></String></td>
      <td>item 23</td>
    </tr>
    <tr>
      <td>Actual type parameter</td>
      <td>String</td>
      <td>Item 23</td>
    </tr>
    <tr>
      <td>Generic Type</td>
      <td>List <E></E></td>
      <td>Items 23,26</td>
    </tr>
    <tr>
      <td>Formal type parameter</td>
      <td>E</td>
      <td>Item 23</td>
    </tr>
    <tr>
      <td>Unbounded wildcard type</td>
      <td>List &lt;?&gt;</td>
      <td>item 23</td>
    </tr>
    <tr>
      <td>Raw type</td>
      <td>List</td>
      <td>Item 23</td>
    </tr>
    <tr>
      <td>Bounded type parameter</td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h1 id="item-31--use-instance-fields-instead-of-ordinals">Item 31  Use instance fields instead of Ordinals</h1>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Abuse of ordinal to derive an associated value - DON'T DO THIS</span>
<span class="kd">public</span> <span class="kd">enum</span> <span class="n">Ensemble</span> <span class="o">{</span>
  <span class="n">SOLO</span><span class="o">,</span> <span class="n">DUET</span><span class="o">,</span> <span class="n">TRIO</span><span class="o">,</span> <span class="n">QUARTET</span><span class="o">,</span> <span class="n">QUINTET</span><span class="o">,</span><span class="n">SEXTET</span><span class="o">,</span> <span class="n">SEPTET</span><span class="o">,</span> <span class="n">OCTET</span><span class="o">,</span> <span class="n">NONET</span><span class="o">,</span> <span class="n">DECTET</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">numberOfMusicians</span><span class="o">()</span> <span class="o">{</span>
     <span class="k">return</span> <span class="nf">ordinal</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<ul>
  <li>Never derive a value associated with an enum from its Ordianal; store it in an instance field instead.</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">enum</span> <span class="n">Ensemble</span> <span class="o">{</span>
  <span class="n">SOLO</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="n">DUET</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="n">TRIO</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span> <span class="n">QUARTET</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="n">QUINTET</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span><span class="n">SEXTET</span><span class="o">(</span><span class="mi">6</span><span class="o">),</span> <span class="n">SEPTET</span><span class="o">(</span><span class="mi">7</span><span class="o">),</span> <span class="n">OCTET</span><span class="o">(</span><span class="mi">8</span><span class="o">),</span> <span class="n">DOUBLE_QUARTET</span><span class="o">(</span><span class="mi">8</span><span class="o">),</span><span class="n">NONET</span><span class="o">(</span><span class="mi">9</span><span class="o">),</span> <span class="n">DECTET</span><span class="o">(</span><span class="mi">10</span><span class="o">),</span> <span class="n">TRIPLE_QUARTET</span><span class="o">(</span><span class="mi">12</span><span class="o">);</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">numberOfMusicians</span><span class="o">;</span>
  <span class="n">Ensemble</span><span class="o">(</span><span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">numberOfMusicians</span> <span class="o">=</span> <span class="n">size</span><span class="o">;</span>
   <span class="o">}</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">numberOfMusicians</span><span class="o">()</span> <span class="o">{</span>
     <span class="k">return</span> <span class="n">numberOfMusicians</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<ul>
  <li>Most Programmers will have no use for Ordinal method. It is desinged for use by general -purpose enum based data structures such as EnumSet and EnumMap
unless you are writing such a data structure , you are best off avoiding the ordinal method entirely.</li>
</ul>

<h1 id="item-32-use-enumset-instead-of-bit-fields">Item 32 Use EnumSet instead of bit fields</h1>

<ul>
  <li>If the elements of an enumerated type are used primarily in sets, it is traditional to use the int enum pattern (Item 30), assigning a different power of 2 to each constant:</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Bit field enumeration constants - OBSOLETE!</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Text</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">STYLE_BOLD</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="o">;</span> <span class="c1">// 1</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">STYLE_ITALIC</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="o">;</span> <span class="c1">// 2</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">STYLE_UNDERLINE</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="o">;</span> <span class="c1">// 4</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">STYLE_STRIKETHROUGH</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="o">;</span> <span class="c1">// 8</span>
  <span class="c1">// Parameter is bitwise OR of zero or more STYLE_ constants</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyStyles</span><span class="o">(</span><span class="kt">int</span> <span class="n">styles</span><span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<table>
  <tbody>
    <tr>
      <td>text.applyStyles(STYLE_BOLD</td>
      <td>STYLE_ITALIC);</td>
    </tr>
  </tbody>
</table>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// EnumSet - a modern replacement for bit fields</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Text</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">enum</span> <span class="n">Style</span> <span class="o">{</span> <span class="n">BOLD</span><span class="o">,</span> <span class="n">ITALIC</span><span class="o">,</span> <span class="n">UNDERLINE</span><span class="o">,</span> <span class="n">STRIKETHROUGH</span> <span class="o">}</span>
  <span class="c1">// Any Set could be passed in, but EnumSet is clearly best</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyStyles</span><span class="o">(</span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Style</span><span class="o">&gt;</span> <span class="n">styles</span><span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
  <span class="o">}</span></code></pre></figure>

<p>text.applyStyles(EnumSet.of(Style.BOLD, Style.ITALIC));</p>

<ul>
  <li>Just because an enumerated type will be used in sets, there is no reason to represent it with bit fields.</li>
  <li>The one disadvantage of enum set as of release 1.6 that it is not possible to create an immutable enum set. Wrap enumset with collections.unmodifiableSet</li>
</ul>

<h1 id="item-33--use-enum-map-instead-of-ordinal-indexing">Item 33  Use Enum map instead of ordinal indexing</h1>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Herb</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">enum</span> <span class="n">Type</span> <span class="o">{</span> <span class="n">ANNUAL</span><span class="o">,</span> <span class="n">PERENNIAL</span><span class="o">,</span> <span class="n">BIENNIAL</span> <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Type</span> <span class="n">type</span><span class="o">;</span>
  <span class="n">Herb</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Type</span> <span class="n">type</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">type</span> <span class="o">=</span> <span class="n">type</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span> <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<ul>
  <li>Now suppose you have an array of herbs representing the plants in a garden,and you want to list these plants organized by type (annual, perennial, or biennial).
To do this, you construct three sets, one for each type, and iterate through the garden, placing each herb in the appropriate set.</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Using ordinal() to index an array - DON'T DO THIS!</span>
<span class="n">Herb</span><span class="o">[]</span> <span class="n">garden</span> <span class="o">=</span> <span class="o">...</span> <span class="o">;</span>
<span class="n">Set</span><span class="o">&lt;</span><span class="n">Herb</span><span class="o">&gt;[]</span> <span class="n">herbsByType</span> <span class="o">=</span> <span class="c1">// Indexed by Herb.Type.ordinal()</span>
<span class="o">(</span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Herb</span><span class="o">&gt;[])</span> <span class="k">new</span> <span class="n">Set</span><span class="o">[</span><span class="n">Herb</span><span class="o">.</span><span class="na">Type</span><span class="o">.</span><span class="na">values</span><span class="o">().</span><span class="na">length</span><span class="o">];</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">herbsByType</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
  <span class="n">herbsByType</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Herb</span><span class="o">&gt;();</span>
<span class="k">for</span> <span class="o">(</span><span class="n">Herb</span> <span class="n">h</span> <span class="o">:</span> <span class="n">garden</span><span class="o">)</span>
  <span class="n">herbsByType</span><span class="o">[</span><span class="n">h</span><span class="o">.</span><span class="na">type</span><span class="o">.</span><span class="na">ordinal</span><span class="o">()].</span><span class="na">add</span><span class="o">(</span><span class="n">h</span><span class="o">);</span>
<span class="c1">// Print the results</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">herbsByType</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%s: %s%n"</span><span class="o">,</span><span class="n">Herb</span><span class="o">.</span><span class="na">Type</span><span class="o">.</span><span class="na">values</span><span class="o">()[</span><span class="n">i</span><span class="o">],</span> <span class="n">herbsByType</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Using an EnumMap to associate data with an enum</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">Herb</span><span class="o">.</span><span class="na">Type</span><span class="o">,</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">Herb</span><span class="o">&gt;&gt;</span> <span class="n">herbsByType</span> <span class="o">=</span><span class="k">new</span> <span class="n">EnumMap</span><span class="o">&lt;</span><span class="n">Herb</span><span class="o">.</span><span class="na">Type</span><span class="o">,</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">Herb</span><span class="o">&gt;&gt;(</span><span class="n">Herb</span><span class="o">.</span><span class="na">Type</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="n">Herb</span><span class="o">.</span><span class="na">Type</span> <span class="n">t</span> <span class="o">:</span> <span class="n">Herb</span><span class="o">.</span><span class="na">Type</span><span class="o">.</span><span class="na">values</span><span class="o">())</span>
  <span class="n">herbsByType</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">t</span><span class="o">,</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Herb</span><span class="o">&gt;());</span>
<span class="k">for</span> <span class="o">(</span><span class="n">Herb</span> <span class="n">h</span> <span class="o">:</span> <span class="n">garden</span><span class="o">)</span>
  <span class="n">herbsByType</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">type</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="n">h</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">herbsByType</span><span class="o">);</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Using ordinal() to index array of arrays - DON'T DO THIS!</span>
<span class="kd">public</span> <span class="kd">enum</span> <span class="n">Phase</span> <span class="o">{</span>
  <span class="n">SOLID</span><span class="o">,</span> <span class="n">LIQUID</span><span class="o">,</span> <span class="n">GAS</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">enum</span> <span class="n">Transition</span> <span class="o">{</span>
    <span class="n">MELT</span><span class="o">,</span> <span class="n">FREEZE</span><span class="o">,</span> <span class="n">BOIL</span><span class="o">,</span> <span class="n">CONDENSE</span><span class="o">,</span> <span class="n">SUBLIME</span><span class="o">,</span> <span class="n">DEPOSIT</span><span class="o">;</span>

    <span class="c1">// Rows indexed by src-ordinal, cols by dst-ordinal</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Transition</span><span class="o">[][]</span> <span class="n">TRANSITIONS</span> <span class="o">=</span> <span class="o">{</span>
      <span class="o">{</span> <span class="kc">null</span><span class="o">,</span> <span class="n">MELT</span><span class="o">,</span> <span class="n">SUBLIME</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">FREEZE</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="n">BOIL</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">DEPOSIT</span><span class="o">,</span> <span class="n">CONDENSE</span><span class="o">,</span> <span class="kc">null</span> <span class="o">}</span>
    <span class="o">};</span>
    <span class="c1">// Returns the phase transition from one phase to another</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Transition</span> <span class="nf">from</span><span class="o">(</span><span class="n">Phase</span> <span class="n">src</span><span class="o">,</span> <span class="n">Phase</span> <span class="n">dst</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">TRANSITIONS</span><span class="o">[</span><span class="n">src</span><span class="o">.</span><span class="na">ordinal</span><span class="o">()][</span><span class="n">dst</span><span class="o">.</span><span class="na">ordinal</span><span class="o">()];</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Using a nested EnumMap to associate data with enum pairs</span>
<span class="kd">public</span> <span class="kd">enum</span> <span class="n">Phase</span> <span class="o">{</span>
  <span class="n">SOLID</span><span class="o">,</span> <span class="n">LIQUID</span><span class="o">,</span> <span class="n">GAS</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">enum</span> <span class="n">Transition</span> <span class="o">{</span>
    <span class="n">MELT</span><span class="o">(</span><span class="n">SOLID</span><span class="o">,</span> <span class="n">LIQUID</span><span class="o">),</span> <span class="n">FREEZE</span><span class="o">(</span><span class="n">LIQUID</span><span class="o">,</span> <span class="n">SOLID</span><span class="o">),</span>
    <span class="n">BOIL</span><span class="o">(</span><span class="n">LIQUID</span><span class="o">,</span> <span class="n">GAS</span><span class="o">),</span> <span class="n">CONDENSE</span><span class="o">(</span><span class="n">GAS</span><span class="o">,</span> <span class="n">LIQUID</span><span class="o">),</span>
    <span class="n">SUBLIME</span><span class="o">(</span><span class="n">SOLID</span><span class="o">,</span> <span class="n">GAS</span><span class="o">),</span> <span class="n">DEPOSIT</span><span class="o">(</span><span class="n">GAS</span><span class="o">,</span> <span class="n">SOLID</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">Phase</span> <span class="n">src</span><span class="o">;</span>
    <span class="kd">final</span> <span class="n">Phase</span> <span class="n">dst</span><span class="o">;</span>
    <span class="n">Transition</span><span class="o">(</span><span class="n">Phase</span> <span class="n">src</span><span class="o">,</span> <span class="n">Phase</span> <span class="n">dst</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">src</span> <span class="o">=</span> <span class="n">src</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">dst</span> <span class="o">=</span> <span class="n">dst</span><span class="o">;</span>
    <span class="o">}</span>

<span class="c1">// Initialize the phase transition map</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Phase</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Phase</span><span class="o">,</span><span class="n">Transition</span><span class="o">&gt;&gt;</span> <span class="n">m</span> <span class="o">=</span><span class="k">new</span> <span class="n">EnumMap</span><span class="o">&lt;</span><span class="n">Phase</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Phase</span><span class="o">,</span><span class="n">Transition</span><span class="o">&gt;&gt;(</span><span class="n">Phase</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="kd">static</span> <span class="o">{</span>
      <span class="k">for</span> <span class="o">(</span><span class="n">Phase</span> <span class="n">p</span> <span class="o">:</span> <span class="n">Phase</span><span class="o">.</span><span class="na">values</span><span class="o">())</span>
        <span class="n">m</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">p</span><span class="o">,</span><span class="k">new</span> <span class="n">EnumMap</span><span class="o">&lt;</span><span class="n">Phase</span><span class="o">,</span><span class="n">Transition</span><span class="o">&gt;(</span><span class="n">Phase</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
      <span class="k">for</span> <span class="o">(</span><span class="n">Transition</span> <span class="n">trans</span> <span class="o">:</span> <span class="n">Transition</span><span class="o">.</span><span class="na">values</span><span class="o">())</span>
        <span class="n">m</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">trans</span><span class="o">.</span><span class="na">src</span><span class="o">).</span><span class="na">put</span><span class="o">(</span><span class="n">trans</span><span class="o">.</span><span class="na">dst</span><span class="o">,</span> <span class="n">trans</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Transition</span> <span class="nf">from</span><span class="o">(</span><span class="n">Phase</span> <span class="n">src</span><span class="o">,</span> <span class="n">Phase</span> <span class="n">dst</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">src</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="n">dst</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<ul>
  <li>
    <p>Now suppose you want to add a new phase to the system: the plasma. There are only two transitions associated with this phase: ionization,
which takes a gas to a plasma; and deionization, which takes a plasma to a gas. To update the array-based program, you would have to add one new constant to
Phase and two to Phase.Transition, and replace the original nine-element array of arrays with a new sixteen-element version. If you add too many or too few elements
to the array, or place an element out of order, you are out of luck: the program will compile, but it will fail at runtime. To update the EnumMap-based
version, all you have to do is add PLASMA to the list of phases, and IONIZE(GAS,PLASMA) and DEIONIZE(PLASMA, GAS) to the list of phase transitions.</p>
  </li>
  <li>
    <p>In summary, it is rarely appropriate to use ordinals to index arrays: use EnumMap instead.</p>
  </li>
</ul>

<h1 id="item-35--prefer-annotations-to-naming-patterns">Item 35  Prefer annotations to naming patterns</h1>

<ul>
  <li>
    <p>Prior to release 1.5, it was common to use naming patterns to indicate that some program elements demanded special treatment by a tool or framework.
For example,the JUnit testing framework originally required its users to designate test methods by beginning their names with the characters test</p>
  </li>
  <li>First, typographical errors may result in silent failures  Ex tsetSafetyOverride</li>
  <li>A second disadvantage of naming patterns is that there is no way to ensure that they are used only on appropriate program elements Ex call a class testSafetyMechanisms and hoping all methods will be tests</li>
  <li>A third disadvantage of naming patterns is that they provide no good way to associate parameter values with program elements
  Ex You want to support a test that succeeds only if it throws a particular exception.</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// Marker annotation type declaration</span>
  <span class="kn">import</span> <span class="nn">java.lang.annotation.*</span><span class="o">;</span>
  <span class="cm">/**
  * Indicates that the annotated method is a test method.
  * Use only on parameterless static methods.
  */</span>
  <span class="nd">@Retention</span><span class="o">(</span><span class="n">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
  <span class="nd">@Target</span><span class="o">(</span><span class="n">ElementType</span><span class="o">.</span><span class="na">METHOD</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nd">@interface</span> <span class="n">Test</span> <span class="o">{</span>
  <span class="o">}</span>
  </code></pre></figure>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="kn">package</span> <span class="n">org</span><span class="o">.</span><span class="na">effectivejava</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">chapter06</span><span class="o">.</span><span class="na">item35</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Sample</span> <span class="o">{</span>
	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">m1</span><span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span> <span class="c1">// Test should pass</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">m2</span><span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">m3</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// Test Should fail</span>
		<span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Boom"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">m4</span><span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">m5</span><span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span> <span class="c1">// INVALID USE: nonstatic method</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">m6</span><span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">m7</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// Test should fail</span>
		<span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Crash"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">m8</span><span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Program to process marker annotations - Page 171</span>
<span class="kn">package</span> <span class="n">org</span><span class="o">.</span><span class="na">effectivejava</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">chapter06</span><span class="o">.</span><span class="na">item35</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.lang.reflect.InvocationTargetException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RunTests</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
		<span class="kt">int</span> <span class="n">tests</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
		<span class="kt">int</span> <span class="n">passed</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
		<span class="n">Class</span> <span class="n">testClass</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
		<span class="k">for</span> <span class="o">(</span><span class="n">Method</span> <span class="n">m</span> <span class="o">:</span> <span class="n">testClass</span><span class="o">.</span><span class="na">getDeclaredMethods</span><span class="o">())</span> <span class="o">{</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">isAnnotationPresent</span><span class="o">(</span><span class="n">Test</span><span class="o">.</span><span class="na">class</span><span class="o">))</span> <span class="o">{</span>
				<span class="n">tests</span><span class="o">++;</span>
				<span class="k">try</span> <span class="o">{</span>
					<span class="n">m</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
					<span class="n">passed</span><span class="o">++;</span>
				<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InvocationTargetException</span> <span class="n">wrappedExc</span><span class="o">)</span> <span class="o">{</span>
					<span class="n">Throwable</span> <span class="n">exc</span> <span class="o">=</span> <span class="n">wrappedExc</span><span class="o">.</span><span class="na">getCause</span><span class="o">();</span>
					<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">m</span> <span class="o">+</span> <span class="s">" failed: "</span> <span class="o">+</span> <span class="n">exc</span><span class="o">);</span>
				<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">exc</span><span class="o">)</span> <span class="o">{</span>
					<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"INVALID @Test: "</span> <span class="o">+</span> <span class="n">m</span><span class="o">);</span>
				<span class="o">}</span>
			<span class="o">}</span>

			<span class="c1">// Array ExceptionTest processing code - Page 174</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">isAnnotationPresent</span><span class="o">(</span><span class="n">ExceptionTest</span><span class="o">.</span><span class="na">class</span><span class="o">))</span> <span class="o">{</span>
				<span class="n">tests</span><span class="o">++;</span>
				<span class="k">try</span> <span class="o">{</span>
					<span class="n">m</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
					<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"Test %s failed: no exception%n"</span><span class="o">,</span> <span class="n">m</span><span class="o">);</span>
				<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Throwable</span> <span class="n">wrappedExc</span><span class="o">)</span> <span class="o">{</span>
					<span class="n">Throwable</span> <span class="n">exc</span> <span class="o">=</span> <span class="n">wrappedExc</span><span class="o">.</span><span class="na">getCause</span><span class="o">();</span>
					<span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Exception</span><span class="o">&gt;[]</span> <span class="n">excTypes</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="na">getAnnotation</span><span class="o">(</span>
							<span class="n">ExceptionTest</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">value</span><span class="o">();</span>
					<span class="kt">int</span> <span class="n">oldPassed</span> <span class="o">=</span> <span class="n">passed</span><span class="o">;</span>
					<span class="k">for</span> <span class="o">(</span><span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Exception</span><span class="o">&gt;</span> <span class="n">excType</span> <span class="o">:</span> <span class="n">excTypes</span><span class="o">)</span> <span class="o">{</span>
						<span class="k">if</span> <span class="o">(</span><span class="n">excType</span><span class="o">.</span><span class="na">isInstance</span><span class="o">(</span><span class="n">exc</span><span class="o">))</span> <span class="o">{</span>
							<span class="n">passed</span><span class="o">++;</span>
							<span class="k">break</span><span class="o">;</span>
						<span class="o">}</span>
					<span class="o">}</span>
					<span class="k">if</span> <span class="o">(</span><span class="n">passed</span> <span class="o">==</span> <span class="n">oldPassed</span><span class="o">)</span>
						<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"Test %s failed: %s %n"</span><span class="o">,</span> <span class="n">m</span><span class="o">,</span> <span class="n">exc</span><span class="o">);</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">}</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"Passed: %d, Failed: %d%n"</span><span class="o">,</span> <span class="n">passed</span><span class="o">,</span> <span class="n">tests</span> <span class="o">-</span> <span class="n">passed</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
  </code></pre></figure>


  </div>

  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Programming Passion</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              Programming Passion
            
            </li>
            
            <li><a href="mailto:rajeshwar.parsi@gmail.com">rajeshwar.parsi@gmail.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/cleancoder1"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">cleancoder1</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/cleancoder1"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">cleancoder1</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>A website to blog about programming ,fitness and yoga
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
